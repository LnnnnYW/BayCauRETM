% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MCMC_diagnosis.R
\docType{class}
\name{mcmc_diag}
\alias{mcmc_diag}
\alias{mcmc_diagnosis}
\alias{print.mcmc_diag}
\alias{summary.mcmc_diag}
\alias{plot.mcmc_diag}
\title{MCMC convergence and positivity diagnostics}
\usage{
mcmc_diagnosis(
  fit_out,
  pars_to_check = c("beta0", "theta0", "beta1", "theta1", "thetaLag"),
  save_plots = FALSE,
  plot_prefix = "traceplot_",
  positivity = FALSE,
  ps_covariates = NULL
)

\method{print}{mcmc_diag}(x, ...)

\method{summary}{mcmc_diag}(object, ...)

\method{plot}{mcmc_diag}(x, pars = NULL, ...)
}
\arguments{
\item{fit_out}{Output list from \code{fit_causal_recur()}, containing \code{stan_fit}
(an rstan \code{stanfit} object) and, if \code{positivity = TRUE}, \code{data_preprocessed}.}

\item{pars_to_check}{Character vector of parameter-name patterns to diagnose
(patterns are passed to \code{bayesplot::mcmc_trace()}).}

\item{save_plots}{Logical; if \code{TRUE}, save each trace plot as a PNG using \code{plot_prefix}.}

\item{plot_prefix}{Filename prefix for saved plots (default \code{"traceplot_"}).}

\item{positivity}{Logical; if \code{TRUE}, run an additional logistic-regression
propensity-score check (default \code{FALSE}).}

\item{ps_covariates}{Character vector of column names used in the positivity
model (required when \code{positivity = TRUE}).}

\item{x}{An \code{mcmc_diag} object.}

\item{...}{Additional arguments (ignored).}

\item{object}{An \code{mcmc_diag} object.}

\item{pars}{Optional character vector of parameter names to display.}
}
\value{
An object of class \code{mcmc_diag}, a list with:
\itemize{
\item \code{stats} — data frame with \code{Parameter}, \code{n_eff}, and \code{Rhat};
\item \code{plots} — named list of ggplot objects for the trace plots.
}
}
\description{
Summarize MCMC convergence for a fitted model (R-hat and effective sample
size), generate trace plots for selected parameters via
\code{bayesplot::mcmc_trace()}, and optionally perform positivity diagnostics
for treatment assignment.
}
\section{Methods (by generic)}{
\itemize{
\item \code{print(mcmc_diag)}: Print the table of MCMC convergence statistics (R-hat & n_eff).

\item \code{summary(mcmc_diag)}: Same as \code{print()} for an \code{mcmc_diag} object.

\item \code{plot(mcmc_diag)}: Display stored trace plots; optionally filter by \code{pars}.

}}
\examples{
\dontrun{
# diag <- mcmc_diagnosis(fit_out, pars_to_check = c("beta0","theta0"))
# print(diag)
# plot(diag, pars = "beta0")
}

}
